<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
                    xmlns:lex="http://wpflocalizeextension.codeplex.com"
                    xmlns:commands="clr-namespace:ApplicationLayer.WpfApp.Commands"
                    xmlns:localConverters="clr-namespace:ApplicationLayer.WpfApp.Converters"
                    xmlns:solutionPackage="clr-namespace:ApplicationLayer.Models.SolutionPackage;assembly=ApplicationLayer.Models"
                    xmlns:utilities="clr-namespace:ApplicationLayer.Common.Utilities;assembly=ApplicationLayer.Common">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Resources/Menus/SolutionExplorerMenus.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    
    <HierarchicalDataTemplate DataType="{x:Type solutionPackage:SolutionHier}" ItemsSource="{Binding Projects}">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
            <Image Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource SolutionImagePath}" />
            <TextBlock Text="{Binding NameWithoutExtension}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource SolutionMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>


    <HierarchicalDataTemplate DataType="{x:Type solutionPackage:ErrorProjectHier}" ItemsSource="{Binding Children}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="projectImage" Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ErrorProjectImagePath}"/>
            <TextBlock Text="{Binding DisplayName}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource ErrorMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>
    
    
    <HierarchicalDataTemplate DataType="{x:Type solutionPackage:DefaultProjectHier}" ItemsSource="{Binding Children}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="projectImage" Width="16" Height="16" Margin="0 0 5 0" 
                        Source="{Binding Extension, Converter={localConverters:ToResourceKeyConverter}, ConverterParameter='Extension'}"/>
            <TextBlock Text="{Binding NameWithoutExtension}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource DefaultProjectMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>


    <HierarchicalDataTemplate DataType="{x:Type solutionPackage:ReferenceHier}" ItemsSource="{Binding Items}">
        <StackPanel Orientation="Horizontal">
            <Image Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ReferenceImagePath}"/>
            <TextBlock Text="{Binding NameWithoutExtension}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource ReferenceFolderMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>


    <DataTemplate DataType="{x:Type solutionPackage:ReferenceFileStruct}">
        <StackPanel Orientation="Horizontal">
            <Image Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ReferenceImagePath}"/>
            <TextBlock Text="{Binding NameWithoutExtension}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource ReferenceItemMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </DataTemplate>


    <HierarchicalDataTemplate DataType="{x:Type solutionPackage:FolderHier}" ItemsSource="{Binding Children}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="image" Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource CloseFolderImagePath}"/>
            <TextBlock Text="{Binding CurOPath}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource FolderMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>


    <DataTemplate DataType="{x:Type solutionPackage:ErrorFileHier}">
        <StackPanel Orientation="Horizontal">
            <Image x:Name="projectImage" Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ErrorProjectImagePath}"/>
            <TextBlock Text="{Binding FullName}"/>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                    <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <StackPanel.ContextMenu>
                <ContextMenu FontSize="11.5" ItemsSource="{StaticResource ErrorMenuItems}"/>
            </StackPanel.ContextMenu>
        </StackPanel>
    </DataTemplate>


    <Style x:Key="EditableTextBox" TargetType="{x:Type TextBox}">
        <Setter Property="Background" Value="White"/>
        <Setter Property="Foreground"  Value="Black"/>
        <Setter Property="Height" Value="16"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>


    <DataTemplate DataType="{x:Type solutionPackage:DefaultFileHier}">
        <DataTemplate.Resources>
            <!-- Normal Mode -->
            <DataTemplate x:Key="NormalTemplate">
                <StackPanel Orientation="Horizontal">
                    <Image Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ProjectImagePath}"/>
                    <TextBlock Text="{Binding FullName}"/>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="PreviewMouseRightButtonDown">
                            <ei:ChangePropertyAction PropertyName="IsSelected" Value="true" TargetObject="{Binding}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <StackPanel.ContextMenu>
                        <ContextMenu FontSize="11.5" ItemsSource="{DynamicResource FileMenuItems}"/>
                    </StackPanel.ContextMenu>
                </StackPanel>
            </DataTemplate>
            <!-- Editable Mode -->
            <DataTemplate x:Key="EditableTemplate">
                <StackPanel Orientation="Horizontal">
                    <Image Width="16" Height="16" Margin="0 0 5 0" Source="{DynamicResource ProjectImagePath}"/>
                    <TextBox Text="{Binding FullName}" Style="{StaticResource EditableTextBox}"/>
                </StackPanel>
            </DataTemplate>
        </DataTemplate.Resources>
        
        <ContentPresenter Content="{Binding}">
            <ContentPresenter.Style>
                <Style TargetType="{x:Type ContentPresenter}">
                    <Setter Property="ContentTemplate" Value="{StaticResource NormalTemplate}"/>
                </Style>
            </ContentPresenter.Style>
        </ContentPresenter>
        
    </DataTemplate>



    <HierarchicalDataTemplate DataType="{x:Type utilities:ClassHierarchyData}" ItemsSource="{Binding Items}">
        <TextBlock Text="{Binding Data.Name}"/>
    </HierarchicalDataTemplate>


</ResourceDictionary>